{extend name="public/layout" /}
{block name='menu'}
{include file='mall/menu' /}
{/block}
{block name='body'}
    <span class="layui-breadcrumb">
      <a href="">会员管理</a>
      <a><cite>编辑账户信息</cite></a>
    </span>
    <div class="layui-tab-content">
      <div class="explanation" id="explanation">
        <div class="ex_tit"><i class="sc_icon"></i><h4>操作提示</h4><span id="explanationZoom" title="收起提示"></span></div>
        <ul>
          <li>管理员对会员账户进行资金、等级积分、消费积分进行调整。</li>
          <li>涉及资金方面管理员要谨慎操作。</li>
        </ul>
      </div>
      <div class="flexilist">
        <div class="common-head">
          <div class="fl">
            <a href="account_log.php?act=list&amp;user_id=710"><div class="fbutton"><div class="piliang" title="会员帐户变动明细"><span><i class="icon icon-copy"></i>会员帐户变动明细</span></div></div></a>
          </div>
        </div>
        <div class="common-content">
          <div class="mian-info">
            <form method="post" action="account_log.php" name="theForm" id="account_info" novalidate="novalidate">
              <div class="switch_info">
                <div class="item">
                  <div class="label">当前会员：</div>
                  <div class="label_value font14">wxff67215523587</div>
                </div>
                <div class="item">
                  <div class="label"><span class="require-field">*</span>&nbsp;帐户变动原因：</div>
                  <div class="label_value">
                    <textarea name="change_desc" cols="60" rows="4" class="textarea" id="change_desc"></textarea>
                    <div class="form_prompt"></div>
                  </div>
                </div>
                <div class="item">
                  <div class="label"><span class="require-field">*</span>状态：</div>
                  <div class="label_value">
                    <div class="checkbox_items">
                     <div class="checkbox_item">
                      <input type="radio" name="money_status" value="0" class="ui-radio" id="money_status0" checked="">
                      <label class="ui-radio-label" for="money_status0">可用资金帐户</label>
                    </div>
                    <div class="checkbox_item">
                      <input type="radio" name="money_status" value="1" class="ui-radio" id="money_status1">
                      <label class="ui-radio-label" for="money_status1">冻结资金帐户</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="item" id="label_user_money">
                <div class="label">&nbsp;</div>
                <div class="label_value">
                  <div class="date-item">
                    <div id="user_month" class="imitate_select select_w75">
                      <div class="cite">增加</div>
                      <ul>
                       <li><a href="javascript:;" data-value="1" class="ftx-01">增加</a></li>
                       <li><a href="javascript:;" data-value="-1" class="ftx-01">减少</a></li>
                     </ul>
                     <input name="add_sub_user_money" type="hidden" value="1" id="month_val">
                   </div>
                   <input type="text" name="user_money" class="text w100 ml10" autocomplete="off" id="user_money">
                   <div class="notic">当前值：<em>¥</em>0.00</div>

                   <div class="form_prompt"></div>
                 </div>
               </div>
             </div>
             <div class="item hide" id="label_frozen_money">
              <div class="label">&nbsp;</div>
              <div class="label_value">
                <div class="date-item">
                  <div id="user_year" class="imitate_select select_w75">
                    <div class="cite">增加</div>
                    <ul>
                     <li><a href="javascript:;" data-value="1" class="ftx-01">增加</a></li>
                     <li><a href="javascript:;" data-value="-1" class="ftx-01">减少</a></li>
                   </ul>
                   <input name="add_sub_frozen_money" type="hidden" value="1" id="year_val">
                 </div>
                 <input type="text" name="frozen_money" class="text w100 ml10" autocomplete="off" id="frozen_money">
                 <div class="notic">当前值：<em>¥</em>0.00</div>

                 <div class="form_prompt"></div>
               </div>
             </div>
           </div>
           <div class="item">
            <div class="label">等级积分帐户：</div>
            <div class="label_value">
              <div class="date-item">
                <div id="user_day" class="imitate_select select_w75">
                  <div class="cite">增加</div>
                  <ul>
                   <li><a href="javascript:;" data-value="1" class="ftx-01">增加</a></li>
                   <li><a href="javascript:;" data-value="-1" class="ftx-01">减少</a></li>
                 </ul>
                 <input name="add_sub_rank_points" type="hidden" value="1" id="day_val">
               </div>
               <input type="text" name="rank_points" class="text w100 ml10" autocomplete="off" id="rank_points">
               <div class="notic">当前值：1</div>

               <div class="form_prompt"></div>
             </div>
           </div>
         </div>
         <div class="item">
          <div class="label">消费积分帐户：</div>
          <div class="label_value">
            <div class="date-item">
              <div id="user_grade" class="imitate_select select_w75">
                <div class="cite">增加</div>
                <ul>
                 <li><a href="javascript:;" data-value="1" class="ftx-01">增加</a></li>
                 <li><a href="javascript:;" data-value="-1" class="ftx-01">减少</a></li>
               </ul>
               <input name="add_sub_pay_points" type="hidden" value="1" id="user_grade_val">
             </div>
             <input type="text" name="pay_points" class="text w100 ml10" autocomplete="off" id="pay_points">
             <div class="notic">当前值：1</div>

             <div class="form_prompt"></div>
           </div>
         </div>
       </div>
       <div class="item">
        <div class="label">&nbsp;</div>
        <div class="label_value info_btn">
          <input name="submitBtn" type="submit" class="button" id="submitBtn" value=" 确定 ">
          <input type="hidden" name="token" value="c49edab224d09de5d24e1bcdf9a18508322868ca44f62506af25f77b45af4e5b">
          <input type="hidden" name="act" value="insert">
          <input type="hidden" name="user_id" value="710">
        </div>
      </div>
    </div>
  </form>
</div>
</div>
</div>
{/block}
  {block name="js"} 
<script type="text/javascript">
$(function(){
    $(":input[name='add_sub_user_money']").val(1);
    $(":input[name='add_sub_frozen_money']").val(1);
    
    checked_prop('money_status');

    $(":input[name='money_status']").click(function(){
        var index = $(this).val();
        
        if(index == 1){
            $("#label_user_money").hide();
            $("#label_frozen_money").show();
            $(":input[name='user_money']").val('');
        }else{
            $("#label_user_money").show();
            $("#label_frozen_money").hide();
            $(":input[name='frozen_money']").val('');
        }
    });
    
    $("#submitBtn").click(function(){
    if($("#account_info").valid()){
      //防止表单重复提交
      if(checkSubmit() == true){
        $(this).parents("form").submit();
      }else{
        return false;
      }
        }
    });
  
    $('#account_info').validate({
        errorPlacement:function(error, element){
            var error_div = element.parents('div.label_value').find('div.form_prompt');
            element.parents('div.label_value').find(".notic").hide();
            error_div.append(error);
        },
        rules : {
            change_desc : {
                required : true
            },
            user_money : {
                number : true
            },
            frozen_money : {
                number : true
            },
            rank_points : {
                digits : true
            },
            pay_points : {
                digits : true
            }
        },
        messages : {
            change_desc : {
                required : '<i class="icon icon-exclamation-sign"></i>'+'帐户变动原因不能为空'
            },
            user_money : {
                number : '<i class="icon icon-exclamation-sign"></i>'+'帐户变动原因不能为空'
            },
            frozen_money : {
                number :'<i class="icon icon-exclamation-sign"></i>'+'帐户变动原因不能为空'
            },
            rank_points : {
                digits : '<i class="icon icon-exclamation-sign"></i>'+'帐户变动原因不能为空'
            },
            pay_points : {
                digits : '<i class="icon icon-exclamation-sign"></i>'+'帐户变动原因不能为空'
            }
        }
    });
});

   </script>

   {/block}