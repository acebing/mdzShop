  <!DOCTYPE html>
  <html>
  <head>
    <meta charset="utf-8">
    <title>layui</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="./layui/css/layui.css">
    <link rel="stylesheet" href="./js/jquery-ui/jquery-ui.min.css">
    <link rel="stylesheet" type="text/css" href="./css/iconfont.css">
    <link rel="stylesheet" type="text/css" href="./css/font-awesome.min.css">
    <link rel="stylesheet" href="./css/perfect-scrollbar.min.css">
    <link rel="stylesheet" href="./css/purebox.css">
    <link rel="stylesheet" href="https://www.maidezhao.com/mobile/public/css/wechat.min.css?v=v2.7.1">
    <link rel="stylesheet" href="./css/main.css">
    <link rel="stylesheet" href="./css/order-new.css">
    <link rel="stylesheet" href="./css/mdz.css">
    <link rel="stylesheet" href="https://www.maidezhao.com/mobile/public/css/wechat.min.css?v=v2.7.1">
    <!-- js部分 -->
    <script src="http://www.jq22.com/jquery/jquery-2.1.1.js"></script>
    <script src="./js/jquery-ui/jquery-ui.min.js"></script>
    <script src="./layui/layui.js"></script>
    <script src="./js/mdz-layui.js"></script>
    <script src="./js/jquery.validation.min.js"></script>
    <script src="./js/perfect-scrollbar.min.js"></script>
    <script src="./js/jquery.purebox.js"></script>
    <script src="./js/lib_ecmobanFunc.js"></script>
    <script src="./js/common.js"></script>
    <script src="./js/region.js"></script>
    <script src="./js/admin.js"></script>
  </head>
  <body>
    <div class="layui-layout layui-layout-admin">
      <div class="layui-header">
        <div class="layui-logo"><img src="./images/admin_logo.png" alt="" style="width: 210px;height: 25px"></div>
        <!-- 头部区域（可配合layui已有的水平导航） -->
        <ul class="layui-nav layui-layout-left">
          <li class="layui-nav-item layui-this"><a href="">平台设置</a></li>
          <li class="layui-nav-item"><a href="">商城管理</a></li>
          <li class="layui-nav-item"><a href="">财务管理</a></li>
          <li class="layui-nav-item"><a href="">微商城</a></li>
          <li class="layui-nav-item"><a href="">小程序</a></li>
        </ul>
        <ul class="layui-nav layui-layout-right">
          <li class="layui-nav-item">
            <a href="javascript:;">
              <img src="http://t.cn/RCzsdCq" class="layui-nav-img">
              沈总
            </a>
            <dl class="layui-nav-child">
              <dd><a href="">基本资料</a></dd>
              <dd><a href="">安全设置</a></dd>
            </dl>
          </li>
          <li class="layui-nav-item">
           <a href="">
            <i class="layui-icon layui-icon-notice" style="font-size: 20px; color: #FFF;"></i><span class="layui-badge">99</span>
          </a>
        </li>
        <li class="layui-nav-item">
        	<a href="">
        		<i class="layui-icon layui-icon-website" style="font-size: 20px; color: #FFF;"></i>
        	</a>
        </li>
        <li class="layui-nav-item">
        	<a href="">
        		<i class="layui-icon layui-icon-theme" style="font-size: 20px; color: #FFF;"></i>
        	</a>
        </li>
        <li class="layui-nav-item">
        	<a href="">
        		<i class="layui-icon layui-icon-fonts-clear" style="font-size: 20px; color: #FFF;"></i>
        	</a>
        </li>
        <li class="layui-nav-item">
        	<a href="">
        		<i class="layui-icon layui-icon-close-fill" style="font-size: 20px; color: #FFF;"></i>
        	</a>
        </li>
      </ul>
    </div>
    <div class="layui-side layui-bg-black">
      <div class="layui-side-scroll">
        <!-- 左侧导航区域（可配合layui已有的垂直导航） -->
       <ul class="layui-nav layui-nav-tree"  lay-filter="test">
        <li class="layui-nav-item layui-nav-itemed">
          <a class="" href="javascript:;">平台设置</a>
          <dl class="layui-nav-child">
            <dd class="layui-this"><a href="javascript:;">基本设置</a></dd>
            <dd><a href="javascript:;">支付方式</a></dd>
            <dd><a href="javascript:;">地区&配送</a></dd>
            <dd><a href="javascript:;">打印设置</a></dd>
            <dd><a href="javascript:;">友情链接</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">第三方登录</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">微信登录</a></dd>
            <dd><a href="javascript:;">QQ登录</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">微信公众号</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">账号设置</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">微信小程序</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">账号设置</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">阿里大于短信</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">账号设置</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">阿里OSS</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">账号设置</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">权限管理</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">管理员列表</a></dd>
            <dd><a href="javascript:;">下级管理员列表</a></dd>
            <dd><a href="javascript:;">管理员日志</a></dd>
            <dd><a href="javascript:;">角色管理</a></dd>
          </dl>
        </li>
        <li class="layui-nav-item">
          <a href="javascript:;">邮件</a>
          <dl class="layui-nav-child">
            <dd><a href="javascript:;">邮件配置</a></dd>
          </dl>
        </li>
      </ul>
      </div>
    </div>
    <div class="layui-body" style="padding: 20px;">
    	<span class="layui-breadcrumb">
       <a href="">平台设置</a>
       <a><cite>第三方登录</cite></a>
     </span>
     <div class="layui-tab-content">
      <div class="explanation" id="explanation">
        <div class="ex_tit"><i class="sc_icon"></i><h4>操作提示</h4><span id="explanationZoom" title="收起提示"></span></div>
        <ul>
          <li>一、配置前先 <a href="https://mp.weixin.qq.com/debug/wxadoc/introduction/index.html" target="_blank">注册小程序</a>，进行微信认证, 已有微信小程序 <a href="https://mp.weixin.qq.com/" target="_blank">立即登录</a></li>
          <li>二、登录 <a href="https://mp.weixin.qq.com/" target="_blank">微信公众号平台 </a>后，在 设置 - 开发者设置 中，查看到微信小程序的 AppID、Appsecret，并配置填写好域名。（注意不可直接使用微信服务号或订阅号的 AppID、AppSecret）</li>
          <li>三、微信认证后，开通小程序微信支付。开通后，配置小程序微信支付的商户号和密钥。 </li>
        </ul>
      </div>
      <div class="flexilist">
        <div class="main-info">
          <!--<div class="panel-heading">公众号设置</div>-->
          <form method="post" action="/mobile/index.php?m=wechat&amp;c=wxapp" class="form-horizontal" role="form">
            <div class="switch_info">
              <div class="item">
                <div class="label-t">小程序名称</div>
                <div class="label_value">
                  <input type="text" name="data[wx_appname]" class="text" value="">
                  <div class="notic"> 小程序名称</div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">小程序AppID</div>
                <div class="label_value">
                  <input type="text" name="data[wx_appid]" class="text" value="">
                  <div class="notic">* 小程序AppID，非微信公众号AppID</div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">小程序AppSecret</div>
                <div class="label_value">
                  <input type="text" name="data[wx_appsecret]" class="text" value="">
                  <div class="notic">* 小程序AppSecret，非微信公众号AppSecret</div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">小程序微信支付商户号</div>
                <div class="label_value">
                  <input type="text" name="data[wx_mch_id]" class="text" value="">
                  <div class="notic">* 小程序微信支付商户号</div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">小程序微信支付密钥</div>
                <div class="label_value">
                  <input type="text" name="data[wx_mch_key]" class="text" value="">
                  <div class="notic">* 小程序微信支付密钥</div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">Token授权密钥</div>
                <div class="label_value">
                  <input type="text" name="data[token_secret]" class="text" value="">
                  <div class="notic">
                    <span class="btn btn-success makeToken">生成Token</span>
                    <!-- <span class="btn btn-info btn-xs copyToken">复制Token</span> -->
                  * Token授权加密key（32位字符）,用于小程序授权登录。重要信息，请不要随意泄露给他人！                </div>
                </div>
              </div>

              <div class="item">
                <div class="label-t">状态</div>
                <div class="label_value">
                  <div class="checkbox_items">
                    <div class="checkbox_item">
                      <input type="radio" name="data[status]" class="ui-radio event_zhuangtai" id="value_118_0" value="1">
                      <label for="value_118_0" class="ui-radio-label ">开启</label>
                    </div>
                    <div class="checkbox_item">
                      <input type="radio" name="data[status]" class="ui-radio event_zhuangtai" id="value_118_1" value="0" checked="">
                      <label for="value_118_1" class="ui-radio-label active">关闭</label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="item">
                <div class="label-t">&nbsp;</div>
                <div class="label_value info_btn">
                  <input type="hidden" name="id" value="">
                  <input type="submit" name="submit" value="保存" class="button btn-danger bg-red">
                </div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
    <div class="layui-footer">
      <!-- 底部固定区域 -->
      <div  class="layui-main" style="text-align: center;">买得着商城<i class="heart">❤</i>不忘初心</div>
    </div>
  </div>
</body>
<script>
  // H5 复制粘贴 - execCommand http://www.jianshu.com/p/37322bb86a48  兼容IE8+，Chrome 45+, Firefox 43+
  var copyUrl = document.querySelector('.copy');
  // 点击的时候调用 copyTextToClipboard() 方法就好了.
  copyUrl.onclick = function() {
    copyTextToClipboard('https://www.maidezhao.com/mobile/index.php?m=wechat&key=90b7b09849da57289a9863364953ee9f');
  }

  var copyToken = document.querySelector('.copyToken');
  copyToken.onclick = function() {
    var newtoken = $("input[name='data[token]']").val();
    copyTextToClipboard(newtoken);
  }

  function copyTextToClipboard(text) {
    var textArea = document.createElement("textarea");
    textArea.style.position = 'fixed';
    textArea.style.top = 0;
    textArea.style.left = 0;
    textArea.style.width = '2em';
    textArea.style.height = '2em';
    textArea.style.padding = 0;
    textArea.style.border = 'none';
    textArea.style.outline = 'none';
    textArea.style.boxShadow = 'none';
    textArea.style.background = 'transparent';
    textArea.value = text;
    document.body.appendChild(textArea);

    textArea.select();
    try {
      var msg = document.execCommand('copy') ? '成功' : '失败';
      console.log('复制内容 ' + msg);
      layer.msg('复制内容 ' + msg);
    } catch (err) {
      console.log('浏览器不支持此复制方法');
      layer.msg('浏览器不支持此复制方法');
    }
    document.body.removeChild(textArea);
  }


  // 生成token md5
  $(".makeToken").click(function(){
    var mydate = new Date();
    var mytime = mydate.toLocaleTimeString(); //获取当前时间
    var token = $.md5(mytime);
    $("input[name='data[token]']").val(token);
  });

</script>
</html>